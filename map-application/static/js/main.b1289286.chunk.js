(this["webpackJsonpmap-application"]=this["webpackJsonpmap-application"]||[]).push([[0],{125:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),c=n(8),r=n.n(c),i=(n(97),n(160)),l=n(22),u=n(24),s=n(19),d=n(166),m=n(173);function b(e){var t=Object(a.useState)(e),n=Object(s.a)(t,2),o=n[0],c=n[1];return{value:o,onChange:function(e){c(e.target.value)}}}var f=n(16);var p=n(43),g=n.n(p);var h={signIn:function(e){return g()({method:"post",url:"http://localhost:3001/login",data:e,headers:{"Content-Type":"application/json"}}).then((function(e){return e})).catch((function(e){return e}))}},v=n(174),E=Object(i.a)({root:{position:"absolute",top:"15%",display:" flex",justifyContent:"center",width:"60%",height:"40%"},buttonRoot:{width:"100%",margin:"3%",height:"56px"},inputField:{width:"100%",margin:"3%"},alert:{margin:"3%",width:"100%",boxSizing:"border-box"}}),y=Object(u.h)((function(e){var t=E(e),n=b(""),c=b(""),r=Object(a.useState)(!1),i=Object(s.a)(r,2),l=i[0],u=i[1],p=Object(f.b)();return o.a.createElement("div",{className:t.root},o.a.createElement("div",{className:t.form},l&&o.a.createElement(v.a,{className:t.alert,severity:"error",onClose:function(){u(!1)}},"Incorrect username or password."),o.a.createElement(m.a,Object.assign({id:"username-00",label:"Username",variant:"outlined",required:!0,classes:{root:t.inputField}},n)),o.a.createElement(m.a,Object.assign({id:"password--00",label:"Password",type:"password",variant:"outlined",required:!0,classes:{root:t.inputField}},c)),o.a.createElement(d.a,{classes:{root:t.buttonRoot},disabled:""==n.value||""==c.value,variant:"contained",color:"primary",onClick:function(){!function(){var t={username:n.value,password:c.value};h.signIn(t).then((function(t){t.response&&"401"==t.response.status&&u(!0),console.debug(t),p({type:"LOGIN",token:t.data.access_token}),e.history.push("/locations/new")})).catch((function(e){console.debug(e)}))}()}},"Sign In")))})),O=n(21);var j=Object(O.b)({authentication:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOGOUT":return console.debug("Logout reducer is being excecuted"),Object.assign({},e,{isLogin:!1,accessToken:""});case"LOGIN":return Object.assign({},e,{isLogin:!0,accessToken:t.token});default:return e}},locations:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SAVE_ALL":return t.locations;default:return e}}}),w=n(58),x=n(80),k={key:"root",storage:n.n(x).a},L=Object(w.a)(k,j),C=Object(O.c)(L),S=Object(w.b)(C);function z(e){C.dispatch({type:"LOGOUT"})}var A=Object(i.a)({root:{display:"flex",justifyContent:"center",width:"100%",height:"100%",background:"white"}}),N=function(e){var t=A(e);return Object(a.useEffect)((function(){console.debug("logout is being executed from here"),z()}),[]),o.a.createElement("div",{className:t.root},o.a.createElement(y,null))},T=n(31),I=n.n(T),M=Object(i.a)({buttonDiv:{display:"flex",justifyContent:"flex-end"},button:{margin:"5px"}});var F=function(e){var t=M(e),n=e.mapMode,c=e.mapAttribute,r=e.handlers,i=e.buttons;I.a.accessToken="pk.eyJ1Ijoic3VyZXNoLXplbW9zbyIsImEiOiJjazkweng5cXowNmd0M2Zyb2I0YjllMWFoIn0.uCF7DOpC6m3gvu3n2uoQ8A";var l=Object(a.useState)(n||"streets-v11"),u=Object(s.a)(l,2),m=u[0],b=u[1],f=Object(a.useRef)();console.debug("Button are",i);var p=function(e){return{className:e.button,size:"small",color:"primary",variant:"contained"}};return Object(a.useEffect)((function(){console.debug("Map type is",m),f.current=new I.a.Map({container:"map",style:"mapbox://styles/mapbox/".concat(m),center:[c.lng,c.lat],zoom:c.zoom}),console.debug("this got executed"),f.current.addControl(new window.MapboxGeocoder({accessToken:I.a.accessToken,mapboxgl:I.a})),f.current.addControl(new I.a.GeolocateControl({positionOptions:{enableHighAccuracy:!0},trackUserLocation:!0})),r&&r.forEach((function(e){e(f.current)}))}),[]),Object(a.useEffect)((function(){f.current.setStyle("mapbox://styles/mapbox/"+m)}),[m]),o.a.createElement("div",{style:{height:"100%",padding:"2% 3% 1% 3%",boxSizing:"border-box"}},e.children,o.a.createElement("div",{className:t.buttonDiv},o.a.createElement(d.a,Object.assign({},p(t),{onClick:function(){b("satellite-v9")}}),"Satellite view"),o.a.createElement(d.a,Object.assign({},p(t),{onClick:function(){b("streets-v11")}}),"Street view"),i&&i.map((function(e){return o.a.createElement(d.a,Object.assign({},p(t),{onClick:e.onClick}),e.buttonText)}))),o.a.createElement("div",{style:{height:"93%"},id:"map"}))};function D(){return o.a.createElement(F,{mapAttribute:{lng:5,lat:34,zoom:2},mapMode:"streets-v11"})}var G=n(176),W=n(170),J=n(168),U=n(169),V=n(167);var B={getLocations:function(e){return g()({method:"get",url:"http://localhost:3001/locations",headers:{Authorization:e}}).then((function(e){return e})).catch((function(e){return e}))},addLocation:function(e,t){return g()({method:"post",url:"http://localhost:3001/locations",data:e,headers:{Authorization:t}}).then((function(e){return e})).catch((function(e){return e}))}},R=Object(i.a)({sidebarStyle:{position:"absolute",backgroundColor:"#404040",color:"#ffffff",zIndex:"1!important",padding:"6px",fontWeight:"bold"}});function X(e){var t=Object(a.useState)({lng:73.413827,lat:25.676973,zoom:2}),n=Object(s.a)(t,2),c=n[0],r=n[1],i=o.a.useState(!1),l=Object(s.a)(i,2),u=l[0],m=l[1],b=Object(f.c)((function(e){return e.authentication.accessToken})),p=R(e),g=function(){m(!1)};return o.a.createElement(o.a.Fragment,null,o.a.createElement(F,{handlers:[function(e){console.debug("Map is: ",e),e.on("click",(function(t){console.debug("clicked",t),r({lng:t.lngLat.lng.toFixed(6),lat:t.lngLat.lat.toFixed(6),zoom:e.getZoom().toFixed(2)})}))}],mapAttribute:{lng:c.lng,lat:c.lat,zoom:c.zoom},mapMode:"streets-v11",buttons:[{buttonText:"Add Location",onClick:function(){m(!0)}}]},o.a.createElement("div",{className:p.sidebarStyle},o.a.createElement("div",null,"Longitude: ",c.lng," | Latitude: ",c.lat))),o.a.createElement(G.a,{open:u,onClose:g,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},o.a.createElement(V.a,{id:"alert-dialog-title"},"Save Location"),o.a.createElement(J.a,null,o.a.createElement(U.a,{id:"alert-dialog-description"},"Do you want to save location with Longitude ",c.lng," and Latitude ",c.lat," ?")),o.a.createElement(W.a,null,o.a.createElement(d.a,{onClick:g,color:"primary"},"Cancel"),o.a.createElement(d.a,{onClick:function(){return function(e){var t={lng:e.lng,lat:e.lat};B.addLocation(t,b).then((function(e){})).catch((function(e){console.log(e)})),g()}(c)},color:"primary",autoFocus:!0},"Confirm"))))}var Z=n(165),_=n(171),q=n(172);function H(){var e=Object(a.useState)([]),t=Object(s.a)(e,2),n=t[0],c=t[1],r=Object(f.b)(),i=Object(f.c)((function(e){return e.authentication.accessToken}));function u(e){return o.a.createElement(_.a,Object.assign({button:!0,component:l.b},e))}return Object(a.useEffect)((function(){B.getLocations(i).then((function(e){var t=e.data;c(t),r(function(e){return{type:"SAVE_ALL",locations:e}}(t))})).catch((function(e){console.log(e)}))}),[]),o.a.createElement("div",null,o.a.createElement(Z.a,{component:"nav"},n.map((function(e,t){return o.a.createElement(u,{key:e.id,id:e.id,to:{pathname:"/locations/".concat(e.id),state:{mapAttribute:{lng:e.lng,lat:e.lat}}}},o.a.createElement(q.a,{primary:"".concat(t+1,". Longtitue ").concat(e.lng," and Latitue ").concat(e.lat)}))}))))}var P=n(83),Q=function(e){var t=e.component,n=e.isLogin,a=Object(P.a)(e,["component","isLogin"]);return o.a.createElement(u.b,Object.assign({},a,{render:function(e){return n?o.a.createElement(t,e):o.a.createElement(u.a,{to:{pathname:"/",state:{from:e.location}}})}}))};function Y(e){var t=Object(u.g)().id,n=Object(f.c)((function(e){return e.locations})).find((function(e){return e.id==t}));return o.a.createElement(F,{mapAttribute:{lng:5,lat:34,zoom:2},handlers:[function(e){console.debug("Map is: ",e),e.on("load",(function(t){e.flyTo({center:[n.lng,n.lat],zoom:10,essential:!0});var a=new I.a.Marker;a.setLngLat([n.lng,n.lat]),a.addTo(e)}))}]})}var $=Object(i.a)({button:{width:"100%",height:"12vh"}}),K=[{path:"/",exact:!0,main:function(){return o.a.createElement(N,null)}},{path:"/map",exact:!0,main:function(){return o.a.createElement(D,null)}}],ee=[{path:"/locations/new",exact:!0,main:function(){return o.a.createElement(X,null)}},{path:"/locations",exact:!0,main:function(){return o.a.createElement(H,null)}},{path:"/locations/:id",exact:!0,main:function(){return o.a.createElement(Y,null)}}],te={beforeLogin:[{to:"/",exact:!0,sidebar:"Login"},{to:"/map",exact:!0,sidebar:"Map"}],afterLogin:[{to:"/locations/new",exact:!0,sidebar:"Add Location"},{to:"/locations",exact:!0,sidebar:"View Locations"},{to:"",exact:!0,sidebar:"Logout",onClick:function(){return z()}}]};function ne(e){var t=$(e),n=Object(f.c)((function(e){return e.authentication.isLogin}));return o.a.createElement(l.a,null,o.a.createElement("div",{style:{display:"flex",height:"100%",width:"100%"}},o.a.createElement("div",{style:{padding:"10px",width:"20%",background:"#f0f0f0"}},!n&&te.beforeLogin.map((function(e,n){return o.a.createElement(d.a,{component:l.c,key:n,to:e.to,style:{textDecoration:"none"},activeStyle:{background:"#3f51b5",color:"white"},isActive:function(t,n){return e.to===n.pathname},onClick:e.onClick,className:t.button},e.sidebar)})),n&&te.afterLogin.map((function(e,n){return o.a.createElement(d.a,{key:n,to:e.to,component:l.c,style:{textDecoration:"none"},activeStyle:{background:"#3f51b5",color:"white"},isActive:function(t,n){return console.debug(t,n),e.to===n.pathname},onClick:e.onClick,className:t.button},e.sidebar)}))),o.a.createElement("div",{style:{width:"80%"}},o.a.createElement(u.d,null,K.map((function(e,t){return o.a.createElement(u.b,{key:t,path:e.path,exact:e.exact,component:e.main})})),ee.map((function(e,t){return o.a.createElement(Q,{key:t,path:e.path,exact:e.exact,isLogin:n,component:e.main})}))))))}var ae=n(81),oe=n.n(ae)()(),ce=Object(i.a)({root:{height:"100vh",width:"100vw"}}),re=function(e){var t=ce(e);return o.a.createElement("div",{className:t.root},o.a.createElement(l.a,{history:oe},o.a.createElement(ne,null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var ie=n(82);r.a.render(o.a.createElement(o.a.StrictMode,null,o.a.createElement(f.a,{store:C},o.a.createElement(ie.a,{loading:null,persistor:S},o.a.createElement(re,null)))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},92:function(e,t,n){e.exports=n(125)},97:function(e,t,n){}},[[92,1,2]]]);
//# sourceMappingURL=main.b1289286.chunk.js.map